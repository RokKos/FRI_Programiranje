(window["webpackJsonplocal-match-viewer"]=window["webpackJsonplocal-match-viewer"]||[]).push([[0],{321:function(t,e,a){t.exports=a(723)},326:function(t,e,a){},327:function(t,e,a){},362:function(t,e){},364:function(t,e){},723:function(t,e,a){"use strict";a.r(e);var i=a(1),n=a.n(i),s=a(308),r=a.n(s),c=(a(326),a(327),a(134)),h=a(62),o=a(4),l=a(6),u=a(15),d=a(14),m=a(16),p=a(727),f=a(726),v=a(725),y=a(729),g=a(51),b=a.n(g),E=a(87),T=a(309),w=a.n(T),O=a(724),S=a(183),x=a(9),I=a(32),k=function(){function t(){Object(o.a)(this,t),this.sections=[]}return Object(l.a)(t,[{key:"add",value:function(t){if(this.sections.length>0){var e=this.sections[this.sections.length-1];if(e.endTime>t.endTime)throw new Error("Section time must be > than previous section time in this curve. "+"\nSection: ".concat(JSON.stringify(t)," \nPrevious section: ").concat(JSON.stringify(e)))}this.sections.push(t)}},{key:"getValue",value:function(t){var e=this.getSectionIndex(t),a=this.sections[e];return 0===e?a.endRangeValue:a.endTime<=t?a.endRangeValue:a.getValue(t,this.sections[e-1])}},{key:"getPreviousSectionEndTime",value:function(t){var e=this.getSectionIndex(t),a=this.sections[e];return 0===e?a.endTime:a.endTime<=t?a.endTime:this.sections[e-1].endTime}},{key:"getCurrentSectionEndTime",value:function(t){var e=this.getSectionIndex(t),a=this.sections[e];return a.endTime<t?null:a.endTime}},{key:"getSectionIndex",value:function(t){if(0===this.sections.length)throw new RangeError("Curve is empty.");if(this.sections[0].endTime>t)throw new RangeError("Current time ".concat(t," is smaller than the end time of the first section")+" ".concat(this.sections[0].endTime,"."));if(this.sections[this.sections.length-1].endTime<=t)return this.sections.length-1;if(this.sections[0].endTime===t)return 0;for(var e=0,a=this.sections.length-1;a-e>1;){var i=Math.floor(e+(a-e)/2),n=this.sections[i];if(n.endTime===t)return i;n.endTime<t?e=i:a=i}return t<=this.sections[e].endTime?e:a}},{key:"getStartTime",value:function(){if(0===this.sections.length)throw new Error("Curve is empty.");return this.sections[0].endTime}},{key:"getEndTime",value:function(){if(0===this.sections.length)throw new Error("Curve is empty.");return this.sections[this.sections.length-1].endTime}},{key:"getSectionsEndTimes",value:function(){var t=[];return this.sections.forEach((function(e){return t.push(e.endTime)})),t}},{key:"numberOfSections",value:function(){return this.sections.length}},{key:"isEmpty",value:function(){return 0===this.sections.length}}]),t}();function C(t){var e=0;return t.forEach((function(t){if(!t.isEmpty()){var a=t.getEndTime();a>e&&(e=a)}})),e}function A(t){var e=-1;return t.forEach((function(t){if(!t.isEmpty()){var a=t.getStartTime();(a<e||-1===e)&&(e=a)}})),e}function R(t,e){if(t.isEmpty())throw new Error("Curve ".concat(e," should not be empty."))}var V=function t(e,a){Object(o.a)(this,t),this.endTime=void 0,this.endRangeValue=void 0,this.endTime=e,this.endRangeValue=a};function j(t){for(var e=0;e<t.length;e++){if(void 0===t[e])throw new Error("Value with index ".concat(e," is undefined."))}}function N(t,e){var a=Math.pow(10,e);return Math.round(t*a)/a}V.NAME=void 0;var D=function(t){function e(){return Object(o.a)(this,e),Object(u.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(l.a)(e,[{key:"getValue",value:function(t,e){return e.endRangeValue}}],[{key:"parse",value:function(t){return j([t.endTime,t.endRangeValue]),new e(t.endTime,t.endRangeValue)}},{key:"toDict",value:function(t,a,i,n){return{type:e.name,entityId:t,attribute:a,endTime:N(i,3),endRangeValue:N(n,3)}}}]),e}(V);D.NAME="StepSection";var Y=function(){function t(e,a,i,n,s){Object(o.a)(this,t),this.t0=void 0,this.A=void 0,this.r=void 0,this.B=void 0,this.C=void 0,this.t0=e,this.A=a,this.r=i,this.B=n,this.C=s}return Object(l.a)(t,[{key:"getValue",value:function(t){return this.A+this.r*Math.sin(this.B*(t-this.t0)+this.C)}}]),t}();function M(t){return t*(Math.PI/180)}function F(t){return(t%=2*Math.PI)<0&&(t+=2*Math.PI),t}var P=function(){function t(e,a,i,n,s,r,c){Object(o.a)(this,t),this.x=void 0,this.y=void 0,this.rotation=void 0,this.visibility=void 0,this.scale=void 0,this.attach=void 0,this.getEntity=void 0,this.x=e,this.y=a,this.rotation=i,this.visibility=n,this.scale=s,this.attach=r,this.getEntity=c}return Object(l.a)(t,[{key:"getXY",value:function(t,e,a){var i=this.getScale(t)/this.scale.getValue(t),n=this.x.getValue(t)*a*i,s=e-this.y.getValue(t)*a*i;if(!this.attach.isEmpty()){var r=this.attach.getValue(t),c=this.getEntity(r.attachToEntityId);if(r.attachRotation){n=this.x.getValue(t)*i,s=this.y.getValue(t)*i;var h=F(Math.atan2(n,s)-M(90)),o=F(M(c.getRotationDeg(t)))-h,l=n,u=s;n=l*Math.cos(o)-u*Math.sin(o),n*=a,s=e-(s=u*Math.cos(o)+l*Math.sin(o))*a}var d=c.getXY(t,e,a),m=Object(I.a)(d,2),p=m[0],f=m[1];r.attachX&&(n+=p),r.attachY&&(s+=f-e)}return[n,s]}},{key:"getVisibility",value:function(t){var e=this.visibility.getValue(t);if(!this.attach.isEmpty()){var a=this.attach.getValue(t);if(a.attachVisibility){var i=this.getEntity(a.attachToEntityId).getVisibility(t);return e&&i}}return e}},{key:"getScale",value:function(t){var e=this.scale.getValue(t);if(!this.attach.isEmpty()){var a=this.attach.getValue(t);if(a.attachScale)e*=this.getEntity(a.attachToEntityId).getScale(t)}return e}},{key:"getAngle",value:function(t){var e=this.rotation.getValue(t);if(!this.attach.isEmpty()){var a=this.attach.getValue(t);if(a.attachAngle)e+=this.getEntity(a.attachToEntityId).getAngle(t)}return e}},{key:"getRotationDeg",value:function(t){var e=this.rotation.getValue(t);if(!this.attach.isEmpty()){var a=this.attach.getValue(t);if(a.attachRotation)e+=this.getEntity(a.attachToEntityId).getRotationDeg(t)}return e}}]),t}(),L=function(){function t(e,a,i){Object(o.a)(this,t),this.textures=void 0,this.scale=void 0,this.settings=void 0,this.textures=e,this.scale=a,this.settings=i}return Object(l.a)(t,null,[{key:"parse",value:function(e,a){j([e.images,e.scale,e.settings]);var i=[];return e.images.forEach((function(t){i.push(X("".concat(a,"/").concat(t)))})),new t(i,e.scale,e.settings)}}]),t}(),_=function t(e){Object(o.a)(this,t),this.path=void 0,this.loadedTextures=new Map,this.loadedAnimations=new Map,this.loadedParticleEffects=new Map,this.path=e};function X(t){var e=x.Texture.from(t,{scaleMode:x.SCALE_MODES.LINEAR});return e.baseTexture.mipmap=x.MIPMAP_MODES.OFF,e}var B=function(){var t=Object(E.a)(b.a.mark((function t(e,a,i){var n,s,r,c,h,o,l,u,d,m,p,f,v,y,g,E;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.getUniqueTexturePaths(),s=0,r=Array.from(n.values());case 2:if(!(s<r.length)){t.next=21;break}if(!H(c=r[s])){t.next=15;break}return h="".concat(a.path,"/animations/").concat(c),t.next=8,fetch("".concat(h,"/anim.json"));case 8:return o=t.sent,t.next=11,o.json();case 11:l=t.sent,a.loadedAnimations.set(c,U.parse(l,h)),t.next=18;break;case 15:u="".concat(a.path,"/images/").concat(c),d=X(u),a.loadedTextures.set(c,d);case 18:s++,t.next=2;break;case 21:m=e.getUniqueParticleEffects(),p=0,f=Array.from(m.values());case 23:if(!(p<f.length)){t.next=36;break}return v=f[p],y="".concat(a.path,"/particles"),t.next=28,fetch("".concat(y,"/").concat(v,".json"));case 28:return g=t.sent,t.next=31,g.json();case 31:E=t.sent,a.loadedParticleEffects.set(v,L.parse(E,y));case 33:p++,t.next=23;break;case 36:i();case 37:case"end":return t.stop()}}),t)})));return function(e,a,i){return t.apply(this,arguments)}}(),U=function(){function t(e,a){var i=this;Object(o.a)(this,t),this.frames=void 0,this.loop=void 0,this.duration=void 0,this.frames=e,this.loop=a,this.duration=0,this.frames.forEach((function(t){i.duration+=t.duration}))}return Object(l.a)(t,[{key:"getTexture",value:function(t){if(!this.loop&&t>this.duration)return this.frames[this.frames.length-1].texture;t%=this.duration;var e=0,a=this.frames[0].texture;return this.frames.forEach((function(i){if(!(e<=t))return a;a=i.texture,e+=i.duration})),a}}],[{key:"parse",value:function(e,a){j([e.frames,e.loop]);var i=[];return e.frames.forEach((function(t){i.push(W.parse(t,a))})),new t(i,e.loop)}}]),t}(),W=function(){function t(e,a,i){Object(o.a)(this,t),this.path=void 0,this.texture=void 0,this.duration=void 0,this.path=e,this.duration=a,this.texture=X("".concat(i,"/").concat(e))}return Object(l.a)(t,null,[{key:"parse",value:function(e,a){return j([e.path,e.duration]),new t(e.path,e.duration,a)}}]),t}();function H(t){return!t.includes(".")}var G,q=function(t){function e(){return Object(o.a)(this,e),Object(u.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(l.a)(e,[{key:"getValue",value:function(t,e){return e.endRangeValue}}],[{key:"parse",value:function(t){return j([t.endTime,t.endRangeValue]),new e(t.endTime,t.endRangeValue)}},{key:"toDict",value:function(t,a,i,n){return{type:e.name,entityId:t,attribute:a,endTime:N(i,3),endRangeValue:n}}}]),e}(V);function z(t){return G[t]}q.NAME="BooleanSection",function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.WIDTH=2]="WIDTH",t[t.HEIGHT=3]="HEIGHT",t[t.ROTATION_DEG=4]="ROTATION_DEG",t[t.LAYER=5]="LAYER",t[t.TEXTURE=6]="TEXTURE",t[t.OPACITY=7]="OPACITY",t[t.VISIBILITY=8]="VISIBILITY",t[t.SCALE=9]="SCALE",t[t.ATTACH=10]="ATTACH"}(G||(G={}));var J=function(){function t(e,a){Object(o.a)(this,t),this.id=void 0,this.sprite=new x.Sprite,this.x=new k,this.y=new k,this.rotation=new k,this.visibility=new k,this.scale=new k,this.attach=new k,this.width=new k,this.height=new k,this.layer=new k,this.texture=new k,this.opacity=new k,this.attachable=void 0,this.startTime=0,this.id=e,this.attachable=new P(this.x,this.y,this.rotation,this.visibility,this.scale,this.attach,a)}return Object(l.a)(t,[{key:"finishSetup",value:function(t){R(this.x,"x"),R(this.y,"y"),R(this.width,"width"),R(this.texture,"texture"),this.startTime=this.getStartTime();var e=this.startTime;this.height.isEmpty()&&this.height.add(new D(e,this.width.getValue(this.width.getStartTime()))),this.attachable.rotation.isEmpty()&&this.attachable.rotation.add(new D(e,0)),this.layer.isEmpty()&&this.layer.add(new D(e,1)),this.opacity.isEmpty()&&this.opacity.add(new D(e,1)),this.attachable.visibility.isEmpty()&&this.attachable.visibility.add(new q(e,!0)),this.attachable.scale.isEmpty()&&this.attachable.scale.add(new D(e,1)),this.attachable.attach.isEmpty()}},{key:"registerOnClickCallback",value:function(t){var e=this;this.sprite.interactive=!0,this.sprite.buttonMode=!0,this.sprite.on("mousedown",(function(){t(e)})),this.sprite.on("touchstart",(function(){t(e)}))}},{key:"update",value:function(t,e,a,i,n){if(t<this.startTime)this.sprite.visible=!1;else if(this.sprite.visible=this.attachable.getVisibility(t),this.sprite.visible){this.sprite.texture=this.getTexture(t,a.loadedTextures,a.loadedAnimations);var s=this.attachable.getXY(t,i,n),r=Object(I.a)(s,2);this.sprite.x=r[0],this.sprite.y=r[1],this.sprite.width=this.width.getValue(t)*n,this.sprite.height=this.height.getValue(t)*n,this.sprite.angle=-this.attachable.getAngle(t),this.sprite.alpha=this.opacity.getValue(t),this.sprite.anchor.set(.5,.5),this.sprite.zIndex=this.layer.getValue(t);var c=this.attachable.getScale(t);this.sprite.scale.x=this.sprite.width/this.sprite.texture.width*c,this.sprite.scale.y=this.sprite.height/this.sprite.texture.height*c}}},{key:"getTexture",value:function(t,e,a){var i=this.texture.getValue(t),n=t-this.texture.getPreviousSectionEndTime(t);return H(i)?a.get(i).getTexture(n):e.get(i)}},{key:"addSection",value:function(t,e){switch(t){case z(G.X):return void this.x.add(e);case z(G.Y):return void this.y.add(e);case z(G.WIDTH):return void this.width.add(e);case z(G.HEIGHT):return void this.height.add(e);case z(G.ROTATION_DEG):return void this.attachable.rotation.add(e);case z(G.TEXTURE):return void this.texture.add(e);case z(G.LAYER):return void this.layer.add(e);case z(G.OPACITY):return void this.opacity.add(e);case z(G.VISIBILITY):return void this.attachable.visibility.add(e);case z(G.SCALE):return void this.attachable.scale.add(e);case z(G.ATTACH):return void this.attachable.attach.add(e)}}},{key:"getCurve",value:function(t){switch(t){case z(G.X):return this.x;case z(G.Y):return this.y;case z(G.WIDTH):return this.width;case z(G.HEIGHT):return this.height;case z(G.ROTATION_DEG):return this.rotation;case z(G.TEXTURE):return this.texture;case z(G.LAYER):return this.layer;case z(G.OPACITY):return this.opacity;case z(G.VISIBILITY):return this.visibility;case z(G.SCALE):return this.scale;case z(G.ATTACH):return this.attach;default:throw Error("attribute ".concat(t," is not valid"))}}},{key:"getAttributes",value:function(){return[this.attachable.x,this.attachable.y,this.width,this.height,this.attachable.rotation,this.texture,this.layer,this.opacity,this.attachable.visibility,this.attachable.scale,this.attachable.attach]}},{key:"getEndTime",value:function(){return C(this.getAttributes())}},{key:"getStartTime",value:function(){return A(this.getAttributes())}}]),t}();function Z(t){return parseInt(t.substr(1,t.length),16)}var $,K="CAMERA_",Q="CAMERA_DEFAULT",tt="CAMERA_HUD";function et(t){return $[t]}!function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.ROTATION_DEG=2]="ROTATION_DEG",t[t.ZOOM=3]="ZOOM"}($||($={}));var at=function(){function t(e,a,i){Object(o.a)(this,t),this.id=void 0,this.width=void 0,this.height=void 0,this.x=new k,this.y=new k,this.rotation=new k,this.zoom=new k,this.startTime=0,this.id=e,this.width=a,this.height=i}return Object(l.a)(t,[{key:"finishSetup",value:function(){R(this.x,"x"),R(this.y,"y"),this.startTime=this.getStartTime(),this.rotation.isEmpty()&&this.rotation.add(new D(this.startTime,0)),this.zoom.isEmpty()&&this.zoom.add(new D(this.startTime,1))}},{key:"update",value:function(t,e,a,i){var n=this.x.getValue(t)*i,s=a-this.y.getValue(t)*i,r=this.width*i,c=this.height*i;e.position.set(r/2,c/2),e.pivot.set(n,s),e.angle=this.rotation.getValue(t),e.scale.set(this.zoom.getValue(t))}},{key:"addSection",value:function(t,e){switch(t){case et($.X):return void this.x.add(e);case et($.Y):return void this.y.add(e);case et($.ROTATION_DEG):return void this.rotation.add(e);case et($.ZOOM):return void this.zoom.add(e)}}},{key:"getAttributes",value:function(){return[this.x,this.y,this.rotation,this.zoom]}},{key:"getEndTime",value:function(){return C(this.getAttributes())}},{key:"getStartTime",value:function(){return A(this.getAttributes())}}]),t}();function it(t,e,a){var i=new at(t,e,a);return i.addSection(et($.X),new D(0,e/2)),i.addSection(et($.Y),new D(0,a/2)),i.finishSetup(),i}var nt="HUD_";var st=function(t){function e(){return Object(o.a)(this,e),Object(u.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(l.a)(e,[{key:"getValue",value:function(t,e){return e.endRangeValue}}],[{key:"parse",value:function(t){return j([t.endTime,t.text]),new e(t.endTime,t.text)}},{key:"toDict",value:function(t,a,i,n){return{type:e.name,entityId:t,attribute:a,endTime:N(i,3),text:n}}}]),e}(V);st.NAME="TextSection";var rt,ct="TEXT_";function ht(t){return rt[t]}!function(t){t[t.TEXT=0]="TEXT",t[t.NUMBER_TEXT=1]="NUMBER_TEXT",t[t.NUMBER_TEXT_DEC=2]="NUMBER_TEXT_DEC",t[t.X=3]="X",t[t.Y=4]="Y",t[t.COLOR=5]="COLOR",t[t.ANCHOR_X=6]="ANCHOR_X",t[t.ANCHOR_Y=7]="ANCHOR_Y",t[t.FONT_SIZE=8]="FONT_SIZE",t[t.FONT_FAMILY=9]="FONT_FAMILY",t[t.FONT_STYLE=10]="FONT_STYLE",t[t.FONT_WEIGHT=11]="FONT_WEIGHT",t[t.ROTATION_DEG=12]="ROTATION_DEG",t[t.OPACITY=13]="OPACITY",t[t.VISIBILITY=14]="VISIBILITY",t[t.SCALE=15]="SCALE",t[t.LAYER=16]="LAYER",t[t.ATTACH=17]="ATTACH"}(rt||(rt={}));var ot=function(){function t(e,a){Object(o.a)(this,t),this.id=void 0,this.textDisplay=new x.Text(""),this.text=new k,this.numberText=new k,this.numberTextDecimals=new k,this.x=new k,this.y=new k,this.color=new k,this.anchorX=new k,this.anchorY=new k,this.fontSize=new k,this.fontFamily=new k,this.fontStyle=new k,this.fontWeight=new k,this.rotation=new k,this.visibility=new k,this.scale=new k,this.attach=new k,this.layer=new k,this.opacity=new k,this.attachable=void 0,this.startTime=0,this.id=e,this.attachable=new P(this.x,this.y,this.rotation,this.visibility,this.scale,this.attach,a)}return Object(l.a)(t,[{key:"finishSetup",value:function(t){try{R(this.text,"text")}catch(a){R(this.numberText,"numberText")}R(this.x,"x"),R(this.y,"y"),this.startTime=this.getStartTime();var e=this.startTime;!this.numberText.isEmpty()&&this.numberTextDecimals.isEmpty()&&this.numberTextDecimals.add(new D(e,2)),this.color.isEmpty()&&this.color.add(new st(e,"#FFFFFF")),this.anchorX.isEmpty()&&this.anchorX.add(new D(e,.5)),this.anchorY.isEmpty()&&this.anchorY.add(new D(e,.5)),this.fontSize.isEmpty()&&this.fontSize.add(new D(e,26)),this.fontFamily.isEmpty()&&this.fontFamily.add(new st(e,"Arial")),this.fontWeight.isEmpty()&&this.fontWeight.add(new st(e,"normal")),this.fontStyle.isEmpty()&&this.fontStyle.add(new st(e,"normal")),this.rotation.isEmpty()&&this.rotation.add(new D(e,0)),this.visibility.isEmpty()&&this.visibility.add(new q(e,!0)),this.scale.isEmpty()&&this.scale.add(new D(e,1)),this.layer.isEmpty()&&this.layer.add(new D(e,1)),this.opacity.isEmpty()&&this.opacity.add(new D(this.startTime,1))}},{key:"update",value:function(t,e,a,i,n){if(t<this.startTime)this.textDisplay.visible=!1;else if(this.textDisplay.visible=this.attachable.getVisibility(t),this.textDisplay.visible){this.textDisplay.text=this.numberText.isEmpty()?this.text.getValue(t):this.numberText.getValue(t).toFixed(this.numberTextDecimals.getValue(t));var s=this.attachable.getXY(t,i,n),r=Object(I.a)(s,2);this.textDisplay.x=r[0],this.textDisplay.y=r[1],this.textDisplay.style.fill=this.color.getValue(t),this.textDisplay.anchor.x=this.anchorX.getValue(t),this.textDisplay.anchor.y=this.anchorY.getValue(t),this.textDisplay.style.fontSize=this.fontSize.getValue(t),this.textDisplay.style.fontFamily=this.fontFamily.getValue(t),this.textDisplay.style.fontWeight=this.fontWeight.getValue(t),this.textDisplay.angle=-this.attachable.getAngle(t),this.textDisplay.alpha=this.opacity.getValue(t),this.textDisplay.zIndex=this.layer.getValue(t),this.textDisplay.scale.set(this.attachable.getScale(t))}}},{key:"addSection",value:function(t,e){switch(t){case ht(rt.TEXT):return void this.text.add(e);case ht(rt.NUMBER_TEXT):return void this.numberText.add(e);case ht(rt.NUMBER_TEXT_DEC):return void this.numberTextDecimals.add(e);case ht(rt.X):return void this.x.add(e);case ht(rt.Y):return void this.y.add(e);case ht(rt.COLOR):return void this.color.add(e);case ht(rt.ANCHOR_X):return void this.anchorX.add(e);case ht(rt.ANCHOR_Y):return void this.anchorY.add(e);case ht(rt.FONT_SIZE):return void this.fontSize.add(e);case ht(rt.FONT_FAMILY):return void this.fontFamily.add(e);case ht(rt.FONT_STYLE):return void this.fontStyle.add(e);case ht(rt.FONT_WEIGHT):return void this.fontWeight.add(e);case ht(rt.ROTATION_DEG):return void this.rotation.add(e);case ht(rt.OPACITY):return void this.opacity.add(e);case ht(rt.VISIBILITY):return void this.visibility.add(e);case ht(rt.SCALE):return void this.scale.add(e);case ht(rt.LAYER):return void this.layer.add(e);case ht(rt.ATTACH):return void this.attach.add(e)}}},{key:"getCurve",value:function(t){switch(t){case ht(rt.TEXT):return this.text;case ht(rt.NUMBER_TEXT):return this.numberText;case ht(rt.NUMBER_TEXT_DEC):return this.numberTextDecimals;case ht(rt.X):return this.x;case ht(rt.Y):return this.y;case ht(rt.COLOR):return this.color;case ht(rt.ANCHOR_X):return this.anchorX;case ht(rt.ANCHOR_Y):return this.anchorY;case ht(rt.FONT_SIZE):return this.fontSize;case ht(rt.FONT_FAMILY):return this.fontFamily;case ht(rt.FONT_STYLE):return this.fontStyle;case ht(rt.FONT_WEIGHT):return this.fontWeight;case ht(rt.ROTATION_DEG):return this.rotation;case ht(rt.OPACITY):return this.opacity;case ht(rt.VISIBILITY):return this.visibility;case ht(rt.SCALE):return this.scale;case ht(rt.LAYER):return this.layer;case ht(rt.ATTACH):return this.attach;default:throw Error("attribute ".concat(t," is not valid"))}}},{key:"getAttributes",value:function(){return[this.text,this.x,this.y,this.color,this.anchorX,this.numberText,this.numberTextDecimals,this.anchorY,this.fontSize,this.fontFamily,this.fontStyle,this.fontWeight,this.rotation,this.visibility,this.scale,this.attach,this.layer,this.opacity]}},{key:"getEndTime",value:function(){return C(this.getAttributes())}},{key:"getStartTime",value:function(){return A(this.getAttributes())}}]),t}(),lt=function(){function t(e,a,i,n,s,r,c){Object(o.a)(this,t),this.gameNamePretty=void 0,this.gameName=void 0,this.gameVersion=void 0,this.assetsVersion=void 0,this.backgroundColor=void 0,this.camera=void 0,this.showEntityPath=void 0,this.gameNamePretty=a,this.gameName=a,this.gameVersion=i,this.assetsVersion=n,this.backgroundColor=s,this.camera=r,this.showEntityPath=c}return Object(l.a)(t,null,[{key:"parse",value:function(e){j([e.gameNamePretty,e.gameName,e.gameVersion,e.assetsVersion,e.backgroundColor,e.camera,e.showEntityPath]);var a=null==e.showEntityPath?null:dt.parse(e.showEntityPath);return new t(e.gameNamePretty,e.gameName,e.gameVersion,e.assetsVersion,e.backgroundColor,ut.parse(e.camera),a)}}]),t}(),ut=function(){function t(e,a){Object(o.a)(this,t),this.width=void 0,this.height=void 0,this.width=e,this.height=a}return Object(l.a)(t,null,[{key:"parse",value:function(e){return j([e.width,e.height]),new t(e.width,e.height)}}]),t}(),dt=function(){function t(e,a,i,n,s){Object(o.a)(this,t),this.pathColor=void 0,this.pathAlpha=void 0,this.clickedEntityTint=void 0,this.pathWidth=void 0,this.drawingTimeInterval=void 0,this.pathColor=Z(e),this.pathAlpha=a,this.clickedEntityTint=Z(i),this.pathWidth=n,this.drawingTimeInterval=s}return Object(l.a)(t,null,[{key:"parse",value:function(e){return j([e.pathColor,e.pathAlpha,e.clickedEntityTint,e.pathWidth,e.drawingTimeInterval]),new t(e.pathColor,e.pathAlpha,e.clickedEntityTint,e.pathWidth,e.drawingTimeInterval)}}]),t}(),mt=function(){function t(e,a){Object(o.a)(this,t),this.description=void 0,this.value=void 0,this.description=e,this.value=a}return Object(l.a)(t,null,[{key:"parse",value:function(e){return j([e.description,e.value]),new t(e.description,e.value)}}]),t}(),pt=function(){function t(e,a){Object(o.a)(this,t),this.name=void 0,this.series=void 0,this.name=e,this.series=a}return Object(l.a)(t,null,[{key:"parse",value:function(e){return j([e.name,e.series]),new t(e.name,e.series)}}]),t}(),ft=function(t){function e(){return Object(o.a)(this,e),Object(u.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(l.a)(e,[{key:"getValue",value:function(t,e){var a=this.endTime-e.endTime,i=t-e.endTime,n=(this.endRangeValue-e.endRangeValue)*(i/a);return e.endRangeValue+n}}],[{key:"parse",value:function(t){return j([t.endTime,t.endRangeValue]),new e(t.endTime,t.endRangeValue)}},{key:"toDict",value:function(t,a,i,n){return{type:e.name,entityId:t,attribute:a,endTime:N(i,3),endRangeValue:N(n,3)}}}]),e}(V);ft.NAME="LinearSection";var vt=function(t){function e(t,a){var i;return Object(o.a)(this,e),(i=Object(u.a)(this,Object(d.a)(e).call(this,t,a.getValue(t)))).sine=void 0,i.sine=a,i}return Object(m.a)(e,t),Object(l.a)(e,[{key:"getValue",value:function(t,e){return this.sine.getValue(t)}}],[{key:"parse",value:function(t){j([t.endTime,t.t0,t.A,t.r,t.B,t.C]);var a=new Y(t.t0,t.A,t.r,t.B,t.C);return new e(t.endTime,a)}},{key:"toDict",value:function(t,a,i,n){return{type:e.name,entityId:t,attribute:a,endTime:N(i,3),t0:N(n.t0,3),A:N(n.A,3),r:N(n.r,3),B:N(n.B,3),C:N(n.C,3)}}}]),e}(V);vt.NAME="SineSection";var yt=function(t){function e(){return Object(o.a)(this,e),Object(u.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(l.a)(e,[{key:"getValue",value:function(t,e){return e.endRangeValue}}],[{key:"parse",value:function(t){j([t.endTime,t.entityId,t.attachToEntityId,t.attachX,t.attachY,t.attachRotation,t.attachAngle,t.attachScale,t.attachVisibility]);var a=new bt(t.attachToEntityId,t.attachX,t.attachY,t.attachRotation,t.attachAngle,t.attachScale,t.attachVisibility);return new e(t.endTime,a)}},{key:"toDict",value:function(t,a,i,n){return{type:e.name,entityId:t,attribute:a,endTime:N(i,3),attachToEntityId:n.attachToEntityId,attachX:n.attachX,attachY:n.attachY,attachRotation:n.attachRotation,attachAngle:n.attachAngle,attachScale:n.attachScale,attachVisibility:n.attachVisibility}}}]),e}(V);yt.NAME="AttachSection";var gt,bt=function t(e,a,i,n,s,r,c){Object(o.a)(this,t),this.attachToEntityId=void 0,this.attachX=void 0,this.attachY=void 0,this.attachRotation=void 0,this.attachAngle=void 0,this.attachScale=void 0,this.attachVisibility=void 0,this.attachToEntityId=e,this.attachX=a,this.attachY=i,this.attachRotation=n,this.attachAngle=s,this.attachScale=r,this.attachVisibility=c},Et=a(311),Tt="PARTICLE_";function wt(t){return gt[t]}!function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.ROTATION_DEG=2]="ROTATION_DEG",t[t.LAYER=3]="LAYER",t[t.OPACITY=4]="OPACITY",t[t.VISIBILITY=5]="VISIBILITY",t[t.SCALE=6]="SCALE",t[t.ATTACH=7]="ATTACH",t[t.EFFECT=8]="EFFECT",t[t.EMIT=9]="EMIT"}(gt||(gt={}));var Ot=function(){function t(e,a){Object(o.a)(this,t),this.id=void 0,this.container=new x.Container,this.emitter=void 0,this.effectDuration=0,this.defaultScale=1,this.x=new k,this.y=new k,this.rotation=new k,this.visibility=new k,this.scale=new k,this.attach=new k,this.layer=new k,this.opacity=new k,this.effect=new k,this.emit=new k,this.attachable=void 0,this.startTime=0,this.id=e,this.attachable=new P(this.x,this.y,this.rotation,this.visibility,this.scale,this.attach,a)}return Object(l.a)(t,[{key:"finishSetup",value:function(t){R(this.x,"x"),R(this.y,"y"),R(this.effect,"effect"),R(this.emit,"emit"),this.startTime=this.getStartTime();var e=this.startTime;this.attachable.rotation.isEmpty()&&this.attachable.rotation.add(new D(e,0)),this.layer.isEmpty()&&this.layer.add(new D(e,1)),this.opacity.isEmpty()&&this.opacity.add(new D(e,1)),this.attachable.visibility.isEmpty()&&this.attachable.visibility.add(new q(e,!0)),this.attachable.scale.isEmpty()&&this.attachable.scale.add(new D(e,1)),this.attachable.attach.isEmpty();var a=this.effect.getValue(this.effect.getStartTime()),i=t.loadedParticleEffects.get(a);this.emitter=new Et.a(this.container,i.textures,i.settings),this.defaultScale=i.scale,this.effectDuration=-1===this.emitter.emitterLifetime?-1:this.emitter.emitterLifetime}},{key:"update",value:function(t,e,a,i,n){if(t<this.startTime)this.container.visible=!1;else if(this.container.visible=this.attachable.getVisibility(t),this.container.visible){var s=this.attachable.getXY(t,i,n),r=Object(I.a)(s,2);this.container.x=r[0],this.container.y=r[1],this.container.angle=-this.attachable.getAngle(t),this.container.alpha=this.opacity.getValue(t),this.container.zIndex=this.layer.getValue(t),this.container.scale.set(this.attachable.getScale(t)*this.defaultScale),this.updateEmitter(t,e)}}},{key:"updateEmitter",value:function(t,e){if(this.emit.getValue(t)){var a=this.emit.getPreviousSectionEndTime(t),i=this.emit.getCurrentSectionEndTime(t),n=t-e,s=t-a;if(n<a||null!==i&&n>=i)this.emitter.cleanup(),this.emitter.emit=!1,this.emitter.playOnce(),this.emitter.update(t-a);else if(!this.emitter.emit&&s<this.emitter.emitterLifetime)this.emitter.cleanup(),this.emitter.emit=!1,this.emitter.playOnce(),this.emitter.update(s);else{var r=-1===this.effectDuration?Math.abs(e):e;this.emitter.update(r)}}else this.emitter.particleCount>0&&(this.emitter.cleanup(),this.emitter.emit=!1)}},{key:"addSection",value:function(t,e){switch(t){case wt(gt.X):return void this.x.add(e);case wt(gt.Y):return void this.y.add(e);case wt(gt.ROTATION_DEG):return void this.attachable.rotation.add(e);case wt(gt.LAYER):return void this.layer.add(e);case wt(gt.OPACITY):return void this.opacity.add(e);case wt(gt.VISIBILITY):return void this.attachable.visibility.add(e);case wt(gt.SCALE):return void this.attachable.scale.add(e);case wt(gt.ATTACH):return void this.attachable.attach.add(e);case wt(gt.EMIT):return void this.emit.add(e);case wt(gt.EFFECT):return void this.effect.add(e)}}},{key:"getCurve",value:function(t){switch(t){case wt(gt.X):return this.x;case wt(gt.Y):return this.y;case wt(gt.ROTATION_DEG):return this.rotation;case wt(gt.LAYER):return this.layer;case wt(gt.OPACITY):return this.opacity;case wt(gt.VISIBILITY):return this.visibility;case wt(gt.SCALE):return this.scale;case wt(gt.ATTACH):return this.attach;case wt(gt.EMIT):return this.emit;case wt(gt.EFFECT):return this.effect;default:throw Error("attribute ".concat(t," is not valid"))}}},{key:"getAttributes",value:function(){return[this.attachable.x,this.attachable.y,this.attachable.rotation,this.effect,this.layer,this.opacity,this.attachable.visibility,this.attachable.scale,this.attachable.attach,this.effect,this.emit]}},{key:"getEndTime",value:function(){return C(this.getAttributes())}},{key:"getStartTime",value:function(){return A(this.getAttributes())}}]),t}(),St=function(){function t(e,a,i,n,s,r,c,h,l){Object(o.a)(this,t),this.botName=void 0,this.teamIndex=void 0,this.color=void 0,this.rank=void 0,this.totalCpuTime=void 0,this.numberOfTimeouts=void 0,this.disqualified=void 0,this.disqualificationTime=void 0,this.disqualificationReason=void 0,this.botName=e,this.teamIndex=a,this.color=i,this.rank=n,this.totalCpuTime=s,this.numberOfTimeouts=r,this.disqualified=c,this.disqualificationTime=h,this.disqualificationReason=l}return Object(l.a)(t,null,[{key:"parse",value:function(e){return j([e.botName,e.teamIndex,e.color,e.rank,e.totalCpuTime,e.numberOfTimeouts,e.disqualified,e.disqualificationTime,e.disqualificationReason]),new t(e.botName,e.teamIndex,e.color,e.rank,e.totalCpuTime,e.numberOfTimeouts,e.disqualified,e.disqualificationTime,e.disqualificationReason)}}]),t}(),xt=[q,D,ft,vt,st,yt],It="CURVE_",kt=function(){function t(e,a,i,n,s,r,c,h){Object(o.a)(this,t),this.gameDetails=void 0,this.matchDetails=void 0,this.botDetails=void 0,this.teamsFinalOrder=void 0,this.charts=[],this.entities=new Map,this.cameras=new Map,this.standaloneCurves=new Map,this.gameDetails=e,this.matchDetails=a,this.botDetails=i,this.teamsFinalOrder=n,this.entities=r,this.cameras=c,this.standaloneCurves=h,this.charts=s}return Object(l.a)(t,[{key:"getUniqueTexturePaths",value:function(){return function(t){var e=new Set;return t.forEach((function(t){t instanceof J&&t.texture.sections.forEach((function(t){e.has(t.endRangeValue)||e.add(t.endRangeValue)}))})),e}(this.entities)}},{key:"getUniqueParticleEffects",value:function(){return function(t){var e=new Set;return t.forEach((function(t){t instanceof Ot&&t.effect.sections.forEach((function(t){e.has(t.endRangeValue)||e.add(t.endRangeValue)}))})),e}(this.entities)}},{key:"getEndTime",value:function(){return function(t,e,a){var i=0;return t.forEach((function(t){var e=t.getEndTime();e>i&&(i=e)})),e.forEach((function(t){var e=t.getEndTime();e>i&&(i=e)})),a.forEach((function(t){var e=t.getEndTime();e>i&&(i=e)})),i}(this.entities,this.cameras,this.standaloneCurves)}}],[{key:"parse",value:function(e){j([e.gameDetails,e.matchDetails,e.charts,e.sections]);var a=lt.parse(e.gameDetails),i=[a.camera.width,a.camera.height],n=i[0],s=i[1],r=function(t,e,a){var i=new Map,n=new Map,s=new Map;return t.forEach((function(t){try{var r,c=!0,h=!1,o=void 0;try{for(var l,u=xt[Symbol.iterator]();!(c=(l=u.next()).done);c=!0){var d=l.value;if(t.type===d.NAME){r=d.parse(t);break}}}catch(g){h=!0,o=g}finally{try{c||null==u.return||u.return()}finally{if(h)throw o}}var m=t.entityId;if(Ct(m)){var p=m;s.has(p)||s.set(p,new k),s.get(p).add(r)}else if(function(t){return t.startsWith(K)}(m)){if(!n.has(m)){var f=new at(m,e,a);n.set(m,f)}n.get(m).addSection(t.attribute,r)}else{if(!i.has(m)){var v,y=function(t){return i.get(t).attachable};v=function(t){return t.startsWith(ct)||t.startsWith(nt+ct)}(m)?new ot(m,y):function(t){return t.startsWith(Tt)||t.startsWith(nt+Tt)}(m)?new Ot(m,y):new J(m,y),i.set(m,v)}i.get(m).addSection(t.attribute,r)}}catch(b){throw b.message+="\nRaw section: ".concat(JSON.stringify(t)),b}})),[i,n,s]}(e.sections,n,s),c=Object(I.a)(r,3),h=c[0],o=c[1],l=c[2],u=[];e.charts.forEach((function(t){u.push(pt.parse(t))})),function(t,e,a){t.forEach((function(t){t.series.forEach((function(t){var i=t.curveRef;if(Ct(i.entityId))t.curve=e.get(i.entityId);else{var n=a.get(i.entityId);t.curve=n.getCurve(i.attribute)}}))}))}(u,l,h);var d=[];e.matchDetails.forEach((function(t){d.push(mt.parse(t))}));var m=[];e.botDetails.forEach((function(t){m.push(St.parse(t))}));var p=e.teamsFinalOrder.length;return p!==m.length&&console.warn("Length of teamsFinalOrder (".concat(p,") should be the same ")+"as the length of the botsDetails (".concat(m.length,")")),new t(a,d,m,e.teamsFinalOrder,u,h,o,l)}}]),t}();function Ct(t){return t.startsWith(It)}var At=function(t){function e(){var t,a;Object(o.a)(this,e);for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(a=Object(u.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(n)))).matchDetails=null,a.botDetails=null,a.teamsFinalOrder=null,a.matchDuration=0,a.time=0,a.playbackSpeed=1,a.gameCameras=[],a.currentCamera=void 0,a.charts=[],a}return Object(m.a)(e,t),e}(x.Application);function Rt(t,e){var a=new At({backgroundColor:0,width:1920,height:1080});a.renderer.view.style.width="100%";var i=new x.Container;i.sortableChildren=!0,a.stage.addChild(i);var n=new x.Container;n.sortableChildren=!0,a.stage.addChild(n);var s=kt.parse(t),r=[s.entities,s.gameDetails],c=r[0],h=r[1];if(a.matchDetails=s.matchDetails,a.botDetails=s.botDetails,a.teamsFinalOrder=s.teamsFinalOrder,a.charts=s.charts,a.renderer.backgroundColor=Z(h.backgroundColor),a.gameCameras=function(t){var e=[];return t.forEach((function(t){return e.push(t)})),e.sort((function(t,e){return t.id.toUpperCase().localeCompare(e.id.toUpperCase())})),e}(s.cameras),a.gameCameras.forEach((function(t){return t.finishSetup()})),0===a.gameCameras.length){var o=it(Q,h.camera.width,h.camera.height);a.gameCameras.push(o)}a.currentCamera=a.gameCameras[0];var l=it(tt,h.camera.width,h.camera.height),u=a.renderer.height,d=u/h.camera.height;l.update(a.time,n,u,d);var m=u/h.camera.height;a.matchDuration=s.getEndTime();var p="".concat(e,"/").concat(h.gameName,"/assets/").concat(h.assetsVersion),f=new _(p);return B(s,f,(function(){try{c.forEach((function(t){t.finishSetup(f);var e=t.id.startsWith(nt)?n:i;t instanceof J?e.addChild(t.sprite):t instanceof ot?e.addChild(t.textDisplay):t instanceof Ot&&e.addChild(t.container)}));var t=new x.Graphics;if(i.addChild(t),null!=h.showEntityPath)!function(t,e,a,i,n){var s;e.forEach((function(e){e instanceof J&&e.registerOnClickCallback((function(e){if(null==s||(s.sprite.tint=16777215,a.clear(),s.id!==e.id)){(s=e).sprite.tint=t.clickedEntityTint,a.clear(),a.beginFill(t.pathColor),a.alpha=t.pathAlpha;for(var r=s.getStartTime(),c=s.getEndTime(),h=r;h<c;h+=t.drawingTimeInterval){var o=s.attachable.getXY(h,i,n),l=Object(I.a)(o,2),u=l[0],d=l[1],m=t.pathWidth*n;a.drawCircle(u,d,m)}a.endFill()}else s=null}))}))}(h.showEntityPath,c,t,u,m);var e=0;a.ticker.add((function(t){var n=0;a.time!==e?n=a.time-e:(n=1/60*t*a.playbackSpeed,a.time+=n),a.time>a.matchDuration&&(a.time=a.matchDuration),a.time<0&&(a.time=0),e=a.time,a.currentCamera.update(a.time,i,u,m),c.forEach((function(t){t.update(a.time,n,f,u,m)}))})),a.start()}catch(s){console.error("Failed to view replay: ".concat(s))}})),a}var Vt=a(182),jt=a(312),Nt=function(t){function e(){var t,a;Object(o.a)(this,e);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(u.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(s)))).gameCanvas=null,a.timeUpdateInterval=null,a.state={app:null,duration:0,time:0,playbackSpeed:1,cameraIndex:0,isPlaying:!0,insideSpeedSlider:!1,speedSliderTabId:-1,showCameras:!1,isFull:!1,overlayOpacity:0,forceViewerWidth:"100%",numberOfCameras:0,errorMessage:""},a.puiRef=Object(i.createRef)(),a.componentDidMount=function(){window.addEventListener("resize",a.updateViewerWidth),a.updateViewerWidth(),a.loadReplayAndStart()},a.componentWillUnmount=function(){window.removeEventListener("resize",a.updateViewerWidth),a.state.app&&(a.state.app.destroy(!0),a.setState({app:null})),null!==a.timeUpdateInterval&&clearInterval(a.timeUpdateInterval)},a.loadReplayAndStart=Object(E.a)(b.a.mark((function t(){var e,i,n,s,r,c,h,o,l;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=null,i=null,n=null,null===a.props.replayUrl){t.next=11;break}return s=a.props.replayUrl,t.next=7,fetch(s);case 7:e=t.sent,i=e.clone(),t.next=17;break;case 11:if(null===a.props.replayFile){t.next=15;break}n=a.props.replayFile,t.next=17;break;case 15:return console.error("replayFile and replayUrl are both null"),t.abrupt("return");case 17:if(t.prev=17,t.prev=18,null===e){t.next=25;break}return t.next=22,e.arrayBuffer();case 22:t.t0=t.sent,t.next=26;break;case 25:t.t0=n;case 26:c=t.t0,t.prev=27,r=JSON.parse(Vt.inflate(new Uint8Array(c),{to:"string"})),t.next=43;break;case 31:return t.prev=31,t.t1=t.catch(27),t.t2=Object,t.next=36,jt.loadAsync(c);case 36:return t.t3=t.sent.files,h=t.t2.values.call(t.t2,t.t3)[0],t.t4=JSON,t.next=41,h.async("text");case 41:t.t5=t.sent,r=t.t4.parse.call(t.t4,t.t5);case 43:t.next=56;break;case 45:if(t.prev=45,t.t6=t.catch(18),null===i){t.next=53;break}return t.next=50,i.text();case 50:t.t7=t.sent,t.next=54;break;case 53:t.t7=n;case 54:o=t.t7,r=JSON.parse(o);case 56:l=Rt(r,a.props.assetsBaseUrl),a.gameCanvas.appendChild(l.view),a.setState({app:l,duration:l.matchDuration}),a.state.numberOfCameras=l.gameCameras.length,a.onCameraChange(0),a.timeUpdateInterval=setInterval(a.setTime,10),null!=a.props.setApplication&&a.props.setApplication(l),t.next=69;break;case 65:t.prev=65,t.t8=t.catch(17),console.error("ERROR: ".concat(t.t8)),a.setState({errorMessage:"Failed to view the replay. Check if the file is in the correct format."});case 69:case"end":return t.stop()}}),t,null,[[17,65],[18,45],[27,31]])}))),a.updateViewerWidth=function(){var t="100%",e=window.screen.width,i=window.screen.height-a.puiRef.current.clientHeight,n=N(e/i,2),s=N(16/9,2);n>s&&(t=(i*s/e*100).toFixed(2)+"%"),t!==a.state.forceViewerWidth&&a.setState({forceViewerWidth:t})},a.setTime=function(){var t=a.state.app;if(null!=t){var e=t.time;a.props.loopMatch&&e===a.state.duration?(t.time=0,a.state.isPlaying||t.ticker.update(),a.setState({time:0})):a.setState({time:e})}},a.onChangeTime=function(t){var e=a.state.app;null!==e&&(e.time=t.target.value,a.state.isPlaying||e.ticker.update(),a.setState({time:t.target.value}))},a.onTogglePlay=function(){var t=a.state.app;null!==t&&(a.state.isPlaying?(t.playbackSpeed=0,a.setState({isPlaying:!1})):(t.playbackSpeed=a.state.playbackSpeed,a.setState({isPlaying:!0})),a.setState({overlayOpacity:.7}),setTimeout((function(){return a.setState({overlayOpacity:0})}),250))},a.onResetSpeed=function(){var t=a.state.app;null!==t&&(t&&(t.playbackSpeed=1),a.setState({playbackSpeed:1,speedSliderTabId:1}))},a.onSpeedChange=function(t){var e=a.state.app;null!==e&&(e&&(e.playbackSpeed=t.target.value),a.setState({playbackSpeed:t.target.value,speedSliderTabId:1}))},a.onCameraChange=function(t){var e=a.state.app;null!==e&&(e.currentCamera=e.gameCameras[t],a.state.isPlaying||e.ticker.update(),a.setState({cameraIndex:t}))},a.goFull=function(){if(null!==a.state.app){var t=!a.state.isFull;a.setState({isFull:t})}},a}return Object(m.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this,e=this,a=this.state.app;return n.a.createElement(w.a,{enabled:this.state.isFull,onChange:function(e){return t.setState({isFull:e})}},""!==this.state.errorMessage?n.a.createElement("div",null," ",this.state.errorMessage," "):null,n.a.createElement("div",{className:null===a?"cont-match-viewer viewer-not-loaded":"cont-match-viewer"},n.a.createElement("div",{className:"row-match-viewer"},n.a.createElement("div",{ref:function(t){e.gameCanvas=t},style:{width:this.state.isFull?this.state.forceViewerWidth:"100%"}}),this.state.overlayOpacity>0?n.a.createElement(O.a,{className:"viewer-overlay-icon",glyph:this.state.isPlaying?"play":"pause",style:{opacity:this.state.overlayOpacity}}):null),n.a.createElement("div",{className:"row-pui",ref:this.puiRef},n.a.createElement("div",{className:"pui-timeline"},n.a.createElement(S.ReactBootstrapSlider,{value:this.state.time,min:0,max:this.state.duration,step:.01,change:this.onChangeTime,tooltip:"hide"})),n.a.createElement("div",{className:"pui-buttons"},n.a.createElement("div",{className:"pui-btns-left"},n.a.createElement("div",{className:"pui-btn",onClick:this.onTogglePlay},this.state.isPlaying?n.a.createElement(O.a,{className:"pui-btns-glyph",glyph:"pause"}):n.a.createElement(O.a,{className:"pui-btns-glyph",glyph:"play"})),n.a.createElement("div",{className:"pui-cont",onMouseEnter:function(){return t.setState({insideSpeedSlider:!0})},onMouseLeave:function(){return t.setState({insideSpeedSlider:!1})}},n.a.createElement("div",{className:"pui-btn pui-btn-wide"},n.a.createElement("span",{className:"pui-text"},this.state.playbackSpeed+"x")),null!==a&&(this.state.insideSpeedSlider||this.state.speedSliderTabId>0)?n.a.createElement("div",{className:"pui-speed-slider",tabIndex:this.state.speedSliderTabId,onBlur:this.state.insideSpeedSlider?void 0:function(){return t.setState({insideSpeedSlider:!1,speedSliderTabId:-1})}},n.a.createElement("span",{className:"pui-divider"}),n.a.createElement(S.ReactBootstrapSlider,{value:this.state.playbackSpeed,min:-6,max:6,step:.1,change:this.onSpeedChange,tooltip:"hide"}),n.a.createElement("span",{className:"pui-divider"}),n.a.createElement("span",{className:"pui-btn",onClick:this.onResetSpeed},n.a.createElement(O.a,{className:"pui-btns-glyph",glyph:"refresh"}))):null)),n.a.createElement("div",{className:"pui-btns-right"},n.a.createElement("div",{className:"pui-cont",onMouseEnter:function(){return t.setState({showCameras:!0})},onMouseLeave:function(){return t.setState({showCameras:!1})}},null!==a&&this.state.showCameras?n.a.createElement("div",{className:"pui-cont pui-cameras"},a.gameCameras.map((function(e,a){return n.a.createElement("div",{className:"pui-btn",key:a,onClick:function(){return t.onCameraChange(a)},style:t.state.cameraIndex===a?{color:"#facd3b"}:{}},n.a.createElement(O.a,{glyph:"facetime-video"}),n.a.createElement("span",{className:"pui-text"}," ",a+1))})),n.a.createElement("span",{className:"pui-divider"})):null,n.a.createElement("div",{className:"pui-btn"},n.a.createElement(O.a,{className:"pui-btns-glyph",glyph:"facetime-video"}),n.a.createElement("span",{className:"pui-text"}," "+(this.state.cameraIndex+1)))),n.a.createElement("div",{className:"pui-btn",onClick:this.goFull},(this.state.isFull,n.a.createElement(O.a,{className:"pui-btns-glyph",glyph:"fullscreen"}))))))))}}]),e}(i.Component),Dt=a(317),Yt=a.n(Dt),Mt=function(t){function e(){return Object(o.a)(this,e),Object(u.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this,e=this.props.stat,a=[];return e.series.forEach((function(e){for(var i=[],n=0;n<=t.props.matchDuration;n+=.1)i.push([n,N(e.curve.getValue(n),3)]);a.push({name:e.name,type:"line",itemStyle:{color:e.color},lineStyle:{width:3},showSymbol:!1,data:i})})),i.createElement(Yt.a,{style:{minWidth:"300px"},option:{tooltip:{trigger:"axis"},legend:{type:"scroll",data:e.series.map((function(t){return t.name}))},grid:{left:"0%",right:"0%",bottom:"0%",top:"12%",containLabel:!0},xAxis:{type:"value",axisLabel:{showMaxLabel:!1,formatter:"{value} s"},min:0,max:this.props.matchDuration},yAxis:{type:"value"},series:a}})}}]),e}(i.Component),Ft=function(t){function e(){var t,a;Object(o.a)(this,e);for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(a=Object(u.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(n)))).state={botIndex:0},a}return Object(m.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this,e=this.props.botDetails,a=this.state.botIndex,n=e[a];return 0===e.length?null:i.createElement(v.a,{md:12},i.createElement(f.a,{className:"bot-details-tabs"},e.map((function(e,n){return i.createElement("div",{key:n,className:n===a?"bot-details-tabs-selected":"",style:{color:e.color},onClick:function(){t.setState({botIndex:n})}},e.botName)}))),i.createElement(f.a,null,i.createElement("hr",{style:{marginTop:"0.5em"}})),i.createElement(f.a,null,"Team index: ",n.teamIndex),i.createElement(f.a,null,"Rank: ",n.rank),i.createElement(f.a,null,"Used CPU time: ",n.totalCpuTime," s"),i.createElement(f.a,null,"Number of timeouts: ",n.numberOfTimeouts),n.disqualified?i.createElement("div",null,i.createElement(f.a,null,"Disqualification time: ",n.disqualificationTime," s"),i.createElement(f.a,null,"Disqualification reason: ",n.disqualificationReason)):null)}}]),e}(i.Component),Pt=function(t){function e(){var t,a;Object(o.a)(this,e);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(u.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(s)))).state={app:null,matchDuration:0},a.setApplication=function(t){a.setState({app:t,matchDuration:N(t.matchDuration,0)})},a.getBotsVersus=function(t,e){return t.sort((function(t,a){return e.indexOf(t.teamIndex)-e.indexOf(a.teamIndex)})),i.createElement("h3",null,t.map((function(a,n){return i.createElement("span",{key:n},i.createElement("span",{style:{color:a.color,fontWeight:"bold"}},a.botName),i.createElement("small",null,n<t.length-1?a.teamIndex!==t[n+1].teamIndex?i.createElement("span",{style:{padding:"0.2em"}},a.teamIndex===e[0]?" defeats ":" and "):", ":null))})))},a}return Object(m.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this.state,e=t.app,a=t.matchDuration;return i.createElement("div",{className:"match"},i.createElement(f.a,null,i.createElement(v.a,{md:8},i.createElement(Nt,{replayFile:this.props.replayFile,replayUrl:this.props.replayUrl,loopMatch:this.props.loopMatch,assetsBaseUrl:this.props.assetsBaseUrl,setApplication:this.setApplication})),i.createElement(v.a,{md:4},null!=e?i.createElement("div",null,i.createElement(f.a,null,this.getBotsVersus(e.botDetails,e.teamsFinalOrder)),i.createElement(f.a,null,"Duration: ",a," s"),e.matchDetails.map((function(t,e){return i.createElement(f.a,{key:e},t.description,": ",t.value)})),i.createElement(f.a,null,i.createElement(Ft,{botDetails:e.botDetails}))):null)),null!=e?i.createElement("div",{className:"statistics"},i.createElement(f.a,null,e.charts.map((function(t,e){return i.createElement(v.a,{md:4,key:e,className:"statistic-col"},i.createElement("h3",null,t.name),i.createElement(Mt,{stat:t,matchDuration:a}))})))):null)}}]),e}(i.Component),Lt=function(t){function e(){var t,a;Object(o.a)(this,e);for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(a=Object(u.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(n)))).state={goBack:!1},a.home=function(){a.setState({goBack:!0})},a}return Object(m.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){if(this.state.goBack)return this.props.history.push(this.props.location),i.createElement(h.a,{to:"/"});var t=new URLSearchParams(this.props.location.search).get("replayUrl"),e=void 0===this.props.assetsServerPort?"games":"http://localhost:".concat(this.props.assetsServerPort);return i.createElement(p.a,null,i.createElement(f.a,null,i.createElement(v.a,{md:12},i.createElement("h2",null,"Local Match Viewer"),i.createElement(y.a,{onClick:this.home,className:"btn btn-lg custom-btn"},"Replays List"),i.createElement(Pt,{replayUrl:t,replayFile:null,loopMatch:!1,assetsBaseUrl:e}))),i.createElement("br",null)," ")}}]),e}(i.Component),_t=a(728),Xt=function(t){function e(){var t,a;Object(o.a)(this,e);for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(a=Object(u.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(n)))).state={directoryItems:[],currentPath:"",chosenReplayPath:""},a.componentDidMount=function(){a.navigate(a.state.currentPath,"/")},a.navigate=function(){var t=Object(E.a)(b.a.mark((function t(e,i){var n,s,r,c,h,o,l,u,d;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n="",""!==e&&(n+="".concat(e)),""!==i&&(n+="".concat(i)),i.endsWith("/")){t.next=6;break}return a.setState({chosenReplayPath:n}),t.abrupt("return");case 6:return s=void 0===a.props.assetsServerPort?"replays".concat(n):"http://localhost:".concat(a.props.assetsServerPort).concat(n),t.next=9,fetch(s);case 9:return r=t.sent,t.next=12,r.text();case 12:for(c=t.sent,(h=document.createElement("html")).innerHTML=c,o=h.getElementsByTagName("a"),l=[],u=0;u<o.length;u++)d=o.item(u),l.push(d.innerText);a.setState({directoryItems:l,currentPath:e+i});case 19:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),a.back=function(){var t=a.state.currentPath,e="";-1!==(t=t.substr(0,t.length-1)).lastIndexOf("/")&&(e=t.substr(0,t.lastIndexOf("/"))),a.navigate(e,"/")},a}return Object(m.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this,e=this.state,a=e.directoryItems,n=e.chosenReplayPath,s=e.currentPath,r=this.props.assetsServerPort;if(""!==n){this.props.history.push(this.props.location);var c=void 0===this.props.assetsServerPort?"replays".concat(n):"http://localhost:".concat(r).concat(n);return i.createElement(h.a,{to:"/viewer?replayUrl=".concat(c)})}return i.createElement(p.a,null,i.createElement(f.a,null,i.createElement(v.a,{md:12},i.createElement(f.a,null,i.createElement("div",{id:"logo"},i.createElement(_t.a,{src:"assets/logo-black-512.png"}))),i.createElement(f.a,null,i.createElement("h2",null,"Local Match Viewer")),i.createElement(f.a,null,i.createElement("h5",null,"Choose a replay file that you want to view.")),i.createElement(f.a,null,i.createElement("h5",null,"If you want to run a file outside of a replays/ directory run ",i.createElement("b",null,"lia -r [path-to-replay]"))),i.createElement(f.a,null,"/"!==s?i.createElement(f.a,{key:-1,className:"replay-picker-item"},i.createElement("a",{onClick:this.back,className:"replay-picker-item"},"..")):null,a.map((function(e,a){return i.createElement(f.a,{key:a},i.createElement("a",{onClick:function(){t.navigate(t.state.currentPath,e)},className:"replay-picker-item"},i.createElement("li",null,e)))}))))))}}]),e}(i.Component),Bt=function(){var t=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_ASSETS_SERVER_PORT;return n.a.createElement(c.a,null,n.a.createElement(h.d,null,n.a.createElement(h.b,{exact:!0,path:"/",component:function(e){return n.a.createElement(Xt,Object.assign({assetsServerPort:t},e))}}),n.a.createElement(h.b,{exact:!0,path:"/viewer",component:function(e){return n.a.createElement(Lt,Object.assign({assetsServerPort:t},e))}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(n.a.createElement(Bt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[321,1,2]]]);
//# sourceMappingURL=main.f09cb47c.chunk.js.map